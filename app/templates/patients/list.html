{% extends "base.html" %} {% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2><i class="fas fa-users"></i> Patient Records</h2>
      <a href="{{ url_for('patient.add_patient') }}" class="btn btn-success">
        <i class="fas fa-plus"></i> Add New Patient
      </a>
    </div>

    {% if patients %}
    <div class="card shadow">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="table-primary">
              <tr>
                <th>Patient ID</th>
                <th>Gender</th>
                <th>Age</th>
                <th>Hypertension</th>
                <th>Heart Disease</th>
                <th>Stroke</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for patient in patients %}
              <tr>
                <td><strong>{{ patient.patient_id }}</strong></td>
                <td>{{ patient.gender }}</td>
                <td>{{ patient.age }}</td>
                <td>
                  {% if patient.hypertension == 1 %}
                  <span class="badge bg-warning">Yes</span>
                  {% else %}
                  <span class="badge bg-success">No</span>
                  {% endif %}
                </td>
                <td>
                  {% if patient.heart_disease == 1 %}
                  <span class="badge bg-warning">Yes</span>
                  {% else %}
                  <span class="badge bg-success">No</span>
                  {% endif %}
                </td>
                <td>
                  {% if patient.stroke == 1 %}
                  <span class="badge bg-danger">Yes</span>
                  {% else %}
                  <span class="badge bg-success">No</span>
                  {% endif %}
                </td>
                <td>
                  <a
                    href="{{ url_for('patient.view_patient', patient_id=patient._id) }}"
                    class="btn btn-sm btn-info"
                    title="View"
                  >
                    <i class="fas fa-eye"></i>
                  </a>
                  <a
                    href="{{ url_for('patient.edit_patient', patient_id=patient._id) }}"
                    class="btn btn-sm btn-primary"
                    title="Edit"
                  >
                    <i class="fas fa-edit"></i>
                  </a>
                  <a
                    href="{{ url_for('patient.delete_patient', patient_id=patient._id) }}"
                    class="btn btn-sm btn-danger"
                    title="Delete"
                  >
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        {% if total_pages > 1 %}
        <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center">
            {% if page > 1 %}
            <li class="page-item">
              <a
                class="page-link"
                href="{{ url_for('patient.list_patients', page=page-1) }}"
                >Previous</a
              >
            </li>
            {% endif %} {% for p in range(1, total_pages + 1) %} {% if p == page
            %}
            <li class="page-item active">
              <a class="page-link" href="#">{{ p }}</a>
            </li>
            {% else %}
            <li class="page-item">
              <a
                class="page-link"
                href="{{ url_for('patient.list_patients', page=p) }}"
                >{{ p }}</a
              >
            </li>
            {% endif %} {% endfor %} {% if page < total_pages %}
            <li class="page-item">
              <a
                class="page-link"
                href="{{ url_for('patient.list_patients', page=page+1) }}"
                >Next</a
              >
            </li>
            {% endif %}
          </ul>
        </nav>
        {% endif %}

        <div class="text-center mt-3">
          <small class="text-muted">
            Showing {{ patients|length }} of {{ total_count }} total patients
          </small>
        </div>
      </div>
    </div>
    {% else %}
    <div class="alert alert-info text-center">
      <i class="fas fa-info-circle"></i> No patient records found.
      <a href="{{ url_for('patient.add_patient') }}" class="alert-link"
        >Add your first patient</a
      >
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
